---
import BaseLayout from "../layouts/BaseLayout.astro";
import architectureDiagram from "../diagrams/architecture-overview.mermaid?raw";
import classDiagram from "../diagrams/class-diagram.mermaid?raw";
---

<BaseLayout
  title="Overview"
  description="Overview - Core architecture and class diagrams of the IoC container"
>
  <article>
    <h1>Overview</h1>

    <p>
      This chapter provides an overview of the core architecture and design of
      the TypeScript IoC container library. Understanding these concepts will
      help you make the most of the library's features.
    </p>

    <h2>Core Architecture</h2>

    <p>
      The IoC container is built on four fundamental abstractions that work
      together to provide dependency injection:
    </p>

    <ul>
      <li>
        <strong>Container</strong>: Manages the lifecycle and resolution of
        dependencies
      </li>
      <li>
        <strong>Provider</strong>: Factory that creates dependency instances
      </li>
      <li>
        <strong>Injector</strong>: Determines how dependencies are injected into
        constructors
      </li>
      <li>
        <strong>Registration</strong>: Connects providers to containers with
        keys and configuration
      </li>
    </ul>

    <h3>Architecture Overview</h3>

    <div class="diagram">
      <div class="mermaid" set:html={architectureDiagram} />
    </div>

    <h2>Class Diagram</h2>

    <p>
      The following diagram shows the main classes and interfaces and their
      relationships:
    </p>

    <div class="diagram">
      <div class="mermaid" set:html={classDiagram} />
    </div>
  </article>
</BaseLayout>

<style>
  .diagram {
    margin: 2rem 0;
    padding: 1.5rem;
    background: #f6f8fa;
    border: 1px solid #e1e4e8;
    border-radius: 8px;
    overflow-x: auto;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  }

  .diagram .mermaid {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
  }

  .diagram pre {
    margin: 0;
    background: transparent;
    border: none;
    padding: 0;
  }

  .diagram code {
    background: transparent;
    padding: 0;
  }
</style>
